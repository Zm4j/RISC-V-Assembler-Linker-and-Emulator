# **RISC-V Assembler, Linker, and Emulator**

A complete **RISC-V software toolchain** implemented in **C++**, consisting of an **assembler**, **linker**, and **emulator**.  
This project provides an end-to-end environment for assembling, linking, and executing RISC-V assembly programs with support for relocatable and executable output formats.

---

## ğŸ§© **Project Structure**

â”œâ”€â”€ inc/       # Header files (.h)
â”œâ”€â”€ src/       # Source files (.cpp)
â”œâ”€â”€ build/     # Build artifacts (generated during compilation)
â”œâ”€â”€ misc/      # Miscellaneous resources and helper files
â”œâ”€â”€ Makefile   # Main build configuration
â”œâ”€â”€ assembler  # Generated assembler executable (after build)
â”œâ”€â”€ linker     # Generated linker executable (after build)
â””â”€â”€ emulator   # Generated emulator executable (after build)

- Files starting with **a_** belong to the **assembler**.  
- Files starting with **l_** belong to the **linker**.  
- Files starting with **e_** belong to the **emulator**.

---

## âš™ï¸ **Build System**

The project uses a single **Makefile** with four main build targets:

|         Command         |          Description         |
|-------------------------|------------------------------|
| `make build_asembler`   | Builds only the assembler.   |
| `make build_linker`     | Builds only the linker.      |
| `make build_emulator`   | Builds only the emulator.    |
| `make build_all`        | Builds all three components. |

All compiled outputs are placed in the **root directory** as separate executables:  
`./asembler`, `./linker`, and `./emulator`.

---

## ğŸ§± **Components Overview**

### **Assembler**
Translates RISC-V assembly code into relocatable object files using **Flex** and **Bison**.  
Each source file is processed into an intermediate representation containing symbol tables, sections, and relocation data.

**Usage:**
```bash
./asembler [-o output_file] input_file
Options:

-o output_file   â€” specifies the output file name.

input_file       â€” the assembly source file to assemble.
```

### **Linker**
Combines multiple object files produced by the assembler into a single executable or relocatable file.
Performs symbol resolution, relocation, and section placement based on provided flags.

**Usage:**
```bash
./linker [-o output_file] [-hex] [-relocatable] [-place=section@address] input_file1 input_file2 ...
Options:

-o output_file             â€” name of the output file.

-hex                       â€” generates a hexadecimal memory image executable by the emulator.

-relocatable               â€” produces a relocatable archive (like a library).

-place=section@address     â€” assigns a custom starting address to a specific section (only valid with -hex).
```

### **Emulator**
Simulates a simplified RISC-V processor that executes machine code generated by the linker.
Implements memory, registers, stack, interrupt handling, and instruction decoding.

**Usage**
```bash
./emulator input_file
Options:

input_file â€” the program file produced by the linker (typically a .hex file).
```

## ğŸ—ï¸ **Build and Run Example**

```bash
# Build all components
make build_all

# Assemble source code
./asembler -o file1.o program1.s
./asembler -o file2.o program2.s

# Link object files into executable hex
./linker -o final.hex -hex file1.o file2.o -place=.text@0x40000000

# Run program in emulator
./emulator final.hex
```

## ğŸ’¡ **Notes**

The build/ folder is automatically generated during compilation and contains temporary build files.

The toolchain supports modular extension, allowing future additions such as new instruction types or section attributes.

Designed for educational purposes and experimentation with RISC-V architecture and low-level systems concepts.

## âš™ï¸ **Requirements**

To build and run the project, ensure the following tools are installed:

g++ (C++17 or later)

make

flex

bison

pthread (for threading support)
